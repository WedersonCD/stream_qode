init
    call streamQode.loadFromLocalStorage()

    if not (streamQode's object) then
        call streamQode.create()
end


def streamQode.create
    set streamQodeObject to {}
    get getUnicId() then 
        set streamQodeObject's id to it
        set streamQodeObject's createAt to Date.now()
        set streamQodeObject's blocks to []
        set streamQodeObject's app to {id:'', name:''}
    
        set streamQode's object to streamQodeObject
end

def streamQode.save

    localStorage.setItem("streamQodeObject",JSON.stringify(streamQode's object))

end

def streamQode.loadFromLocalStorage

    get localStorage.getItem("streamQodeObject") then
        set streamQodeObject to it
    
    if streamQodeObject is '{}' then
        set streamQodeObject to null
    else
        set streamQodeObject to JSON.parse(streamQodeObject)
    end
    
    set streamQode's object to streamQodeObject
end

def streamQode.addCodeBlock(blockCode)
        set blockCodeObject to {}

        log blockCode
        set blockCodeObject's id    to .stream-block's @block-id in blockCode
        set blockCodeObject's name  to .stream-block-header-name-label-value's textContent in blockCode
        set blockCodeObject's checkedOptions to <:checked/>'s name in  blockCode
        log blockCodeObject

        streamQode.object.blocks.push(blockCodeObject)
end